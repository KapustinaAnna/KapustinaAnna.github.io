# Автозаказ продуктов

[Автозаказ продуктов](../requirements.md#_17)

## Задачи

## Задача 1: Реализовать функционал автоматического формирования заказа, при критическом значении количества продукта.

**Критерии приемки:** 

  -  Система должна регулярно проверять текущее количество каждого продукта по установленному графику (каждые 3 часа) .
  -  При снижении количества продукта до критического значения должна инициироваться процедура формирования заказа.
 -   Заказ должен содержать информацию о продукте, количестве, необходимом для пополнения, и дате формирования заказа, поставщике.


### Основной сценарий

| Шаг | Описание шага                                                                                                      | Результат                                                                                               |
|-----|-------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| 1   | Система инициирует проверку количества продуктов по установленному графику (каждые 3 часа)                        | Проверка выполняется автоматически без ошибок                                                          |
| 2   | В системе текущее количество продукта «кола» равно критическому значению «10»                                         | Система фиксирует, что количество продукта достигло критического значения                             |
| 3   | Инициируется процедура формирования заказа                                                                         | Создается новый заказ, который содержит информацию о продукте, его количестве и дате формирования      |
| 4   | Проверяем детали заказа                                                                                            | Заказ включает информацию: продукт «Кола», количество для пополнения, дата формирования, информация о поставщике, информация о складе |
| 5   | Проверяем наличие нового заказа в соответствующем разделе системы                                                  | Новый заказ успешно отображается в списке активных заказов                                              |

-----

### Негативный сценарий

| Шаг | Описание шага                                                                                                      | Результат                                                                                               |
|-----|-------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| 1   | Система инициирует проверку количества продуктов по установленному графику (каждые 3 часа)                        | Проверка выполняется автоматически без ошибок                                                          |
| 2   | В системе текущее количество продукта «Кола» находится выше критического значения «10»                                | Система не инициирует процедуру формирования заказа                                                    |
| 3   | Проверяем состояние системы после проверки                                                                          | Заказ не был создан, система не показывает уведомление о необходимости формирования заказа               |
| 4   | Проверяем детали текущего состояния продукта                                                                        | Текущее количество продукта остается неизменным и не требует пополнения                                  |

-----



## Задача 2: Сделать функционал уведомления о необходимости формирования заказа.

**Критерии приемки:** 

  - Система должна автоматически отправлять уведомление пользователю о критическом количестве продукта.

### Основной сценарий 

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Система проверяет количество продукта на складе (каждые 3 часа) |Количество продукта "Кола" равно минимально допустимому количеству 10 шт|
|2|Проверить, авторизован ли пользователь|Пользователь авторизован|
|3|Система пересылает уведомление о необходимости формирования заказа на продукт "Кола"|Пользователь получает уведомление о формировании заказа с информацией о продукте|
|4|Проверить содержание уведомления|Уведомление содержит название продукта, количество и другую необходимую информацию|

-----

### Негативный сценарий

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Система проверяет количество продукта на складе (каждые 3 часа)  |<p>Количество продукта "Кола" выше минимально допустимого(больше 10) (у данного продукта критическое значение 10 шт).</p><p>Уведомление не отправляется</p>|

-----

### Альтернативный сценарий


|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Проверить количество продукта "Кола" на складе (у данного продукта критическое значение 10 шт)|Количество продукта равно минимально допустимому количеству(10)| 
|2|Проверить, авторизован ли пользователь|Пользователь не авторизован|
|3|Отправить сообщение на электронную почту|Пользователь получает письмо|

-----

## Задача 3: Реализовать функционал  утверждения заказа  поставщику пользователем
**Критерии приемки:**

  - Пользователь должен иметь возможность просмотреть и утвердить заказ.

### Основной сценарий

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Перейти на страницу заказа|Пользователь видит детали заказа, включая список продуктов, количество, склад  и поставщика|
|2|Прокрутить страницу вниз для просмотра всех деталей|Все детали заказа отображаются корректно, читабельно и удобно для восприятия|
|3|Проверить наличие информации о заказе|Пользователь видит полную информацию о заказе без ошибок или пропусков|
|4|Нажать кнопку "Утвердить заказ"|Система обрабатывает запрос на утверждение заказа (сменить статус заказа)|
|5|Проверить статус заказа в системе|<p>Уведомление о том, что заказ был успешно утвержден</p><p>Переход на следующий этап обработки заказа</p>|

-----

### Негативный сценарий

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Открыть страницу заказа|Пользователь видит изначально загруженные детали заказа|
|2|Изменить количество  продукта "Кола" на 0|Пользователь видит изменение в деталях заказа|
|3|Нажать кнопку "Утвердить заказ"|Система выводит сообщение об ошибке: "Неверные детали заказа. Пожалуйста, проверьте данные."|

-----

### Альтернативный сценарий  

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Открыть страницу заказа|Пользователь видит детали заказа|
|2|Внести необходимые изменения в детали заказа|Измененные детали отображаются на странице|
|3|Нажать кнопку "Утвердить заказ"|Система обрабатывает запрос на утверждение заказа (сменить статус заказа)|
|4|Проверить статус заказа в системе|<p>Уведомление о том, что заказ был успешно утвержден</p><p>Переход на следующий этап обработки заказа</p>|

-----

## Задача 4: Добавить интеграцию с 1С и  системой mixcart для отправки заказа поставщику.   
**Критерии приемки:**

   - Система должна отправить корректные данные в mixcart  о заказе.
   - Система должна поучать ответы от  mixcart о статусе заказа.


### Основной сценарий

| Шаг | Описание шага                                                                  | Результат                                                                                                          |
|-----|--------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
| 1   | Заказ поставщику сформирован и утвержден                                       | В системе заказ заказа имеет статус "Утвержден"                                                                          |
| 2   | Отправить запрос в систему Mixcart c заказом    |В системе Mixcart появился новый заказ с корректными данными                                                                                     |
| 3   | Проверить ответ от mixcart о статусе заказа                                    | Пользователь получает уведомление о успешном получении заказа с указанием идентификатора заказа                   |
| 4   | Проверить базу данных на наличие информации о заказе                           | Заказ корректно сохранён в базе данных системы и соответствует информации, отправленной в mixcart                |

---

### Негативный сценарий

| Шаг | Описание шага                                                                  | Результат                                                                                                          |
|-----|--------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
| 1   | Заказ поставщику сформирован и утвержден                                       | В системе заказ заказа имеет статус "Утвержден"                                                                          |
| 2   | Отправить запрос в систему Mixcart c заказом    |В системе Mixcart  новый заказ не появился                                                                                     |
| 3   | Проверить ответ от mixcart о статусе заказа                                    | Пользователь получает уведомление о том что заказ не создан. Уведомление "отправить заказ повторно?"  |
| 4   | Нажать кнопка "Отправить повторно"                           | Заказ корректно сохранён в базе данных системы и соответствует информации, отправленной в mixcart                |
| 5   | Проверить базу данных на наличие информации о заказе                           | Заказ корректно сохранён в базе данных системы и соответствует информации, отправленной в mixcart                |

---


## Задача 5: Добавить функционал подтверждения получения заказа 
**Критерии приемки:**

   - Статус заказа должен приходить от Mixcart и меняться в системе
   - Пользователь должен иметь возможность подтвердить в системе получение заказа.

###  Основной сценарий

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Перейти в раздел " Заказы продуктов"|Пользователь видит список заказов|
|2|Найти заказ, который необходимо отметить как полученный|Пользователь находит нужный заказ в списке|
|3|Нажать кнопку "Отметить как полученный на складе"|Появляется форма для подтверждения получения заказа|
|4|Подтвердить получение заказа|<p>Заказ отмечен как полученный</p><p>` `Система отображает сообщение об успешной отметке</p>|

-----
### Негативный сценарий 

|**Шаг**|**Описание шага**|**Результат**|
|-------|---------------------------------------------------------------|----------------------------------------------------|
|1|Перейти в раздел " Заказы продуктов"|Пользователь видит список заказов|
|2|Найти заказ, который не был доставлен на склад|Пользователь находит нужный заказ в списке|
|3|Нажать кнопку "Отметить как полученный на складе"|Система выводит сообщение об ошибке: "Вы не можете отметить заказ, так как он не был доставлен" (нет информации от MixCart)|
|4|Попробовать подтвердить получение заказа|Пользователь не может отметить заказ, кнопка остаётся неактивной|  

-----